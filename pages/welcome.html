<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome Leaflet - Curious Souls Caf√©</title>
  <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
  <!-- Font Awesome for icons, used for the QR code icon and back arrow -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <style>
    /* GitHub-style CSS */
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
      line-height: 1.6;
      color: #24292e;
      background-color: #f6f8fa;
    }

    /* Center content and set maximum width */
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
    }

    h2 {
      font-size: 1.5rem;
      margin-top: 2rem;
      border-bottom: 1px solid #eaecef;
      padding-bottom: 0.3rem;
      color: #0366d6;
    }
    h3 {
      font-size: 1.25rem;
      margin-top: 1.5rem;
      margin-bottom: 1rem;
      line-height: 1.25;
      font-weight: 600;
    }
    p {
      margin: 1rem 0;
    }
    ul, ol {
      padding-left: 2rem;
      margin: 1rem 0;
    }
    ul li, ol li {
      margin-bottom: 0.5rem;
    }
    blockquote {
      margin: 1rem 0;
      padding: 0.5rem 1rem;
      color: #6a737d;
      border-left: 4px solid #dfe2e5;
      background-color: #f6f8fa;
    }
    a {
      color: #0366d6;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    hr {
      border: 0;
      height: 1px;
      background: #eaecef;
      margin: 2rem 0;
    }
    code, pre {
      font-family: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;
      font-size: 0.9rem;
      background-color: #f6f8fa;
      border: 1px solid #eaecef;
      border-radius: 3px;
      padding: 0.2rem 0.4rem;
    }
    pre {
      padding: 1rem;
      overflow: auto;
    }
    img {
      max-width: 100%;
      height: auto;
      border-radius: 4px;
    }
    strong {
      font-weight: 600;
    }
    em {
      font-style: italic;
    }
    del {
      color: #6a737d;
    }

    /* General Modal styles for the overlay and content box */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.6);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s, visibility 0.3s;
        padding: 1rem; /* Better on very small screens */
        box-sizing: border-box;
    }
    .modal-overlay.show {
        opacity: 1;
        visibility: visible;
    }
    .modal-content {
        background-color: white;
        padding: 2rem;
        border-radius: 0.75rem;
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
        text-align: center;
        max-width: 360px;
        width: 100%;
        transform: translateY(-20px);
        transition: transform 0.3s;
    }
    .modal-overlay.show .modal-content {
        transform: translateY(0);
    }

    /* QR Code Modal specific styles */
    #qr-modal-content {
        max-width: 380px;
        padding: 1.5rem;
        position: relative;
    }
    #qr-modal-content img {
        width: 100%;
        height: auto;
        max-width: 250px;
        margin: 0 auto 1rem auto;
        display: block;
        border-radius: 0.5rem;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .qr-modal-close-button {
        position: absolute;
        top: 0.75rem;
        right: 0.75rem;
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: #4a5568;
        line-height: 1;
        padding: 0.25rem;
        border-radius: 50%;
        transition: background-color 0.2s, color 0.2s;
    }
    .qr-modal-close-button:hover {
        background-color: #e2e8f0;
        color: #2d3748;
    }
    .qr-code-link {
        font-size: 0.875rem;
        color: #0366d6;
        text-decoration: none;
        transition: color 0.2s ease-in-out, text-decoration 0.2s ease-in-out;
        display: flex;
        align-items: center;
        gap: 0.25rem;
        margin-top: 1.5rem;
        justify-content: center;
    }
    .qr-code-link:hover {
        color: #0056b3;
        text-decoration: underline;
    }

    /* Small helper classes used in modal text */
    .text-sm { font-size: 0.875rem; }
    .text-gray-700 { color: #374151; }
    .text-gray-600 { color: #4b5563; }
    .text-gray-500 { color: #6b7280; }
    .text-blue-600 { color: #2563eb; }
    .hover\:underline:hover { text-decoration: underline; }
    .mr-1 { margin-right: 0.25rem; }
    .mt-2 { margin-top: 0.5rem; }
    .mt-4 { margin-top: 1rem; }
    .break-all { word-break: break-all; }
    .select-none { user-select: none; }

    /* Disabled share button style */
    .btn-disabled {
      opacity: 0.5;
      cursor: not-allowed;
      text-decoration: none !important;
    }

    /* Floating Back button (ported from code A) */
    .floating-back-btn {
      position: fixed; left: 1rem; bottom: 1rem; z-index: 3000;
      background-color: #43c6a6; color: white; border: none; padding: .65rem .9rem; border-radius: 9999px;
      box-shadow: 0 8px 16px rgba(0,0,0,.15); display: inline-flex; align-items: center; gap: .5rem; font-weight: 600;
      transition: transform .15s ease, box-shadow .2s ease, background-color .2s ease, opacity .2s ease; opacity: .95;

      /* Attention effect variables */
      --pulse-from: #43c6a6;
      --pulse-to: #6b7280;
      --glow-color: rgba(99,102,241,0.55);
    }
    .floating-back-btn:hover { transform: translateY(-2px); box-shadow: 0 12px 22px rgba(0,0,0,.20); background-color: #374151; opacity: 1; }
    .floating-back-btn:active { transform: translateY(0); box-shadow: 0 6px 12px rgba(0,0,0,.15); }

    @keyframes backBtnPulse {
      0%   { transform: translateY(0) scale(1);   background-color: var(--pulse-from); box-shadow: 0 0 0 rgba(0,0,0,0), 0 8px 16px rgba(0,0,0,.15); }
      50%  { transform: translateY(-1px) scale(1.06); background-color: var(--pulse-to);   box-shadow: 0 0 18px var(--glow-color), 0 12px 22px rgba(0,0,0,.20); }
      100% { transform: translateY(0) scale(1);   background-color: var(--pulse-from); box-shadow: 0 0 0 rgba(0,0,0,0), 0 8px 16px rgba(0,0,0,.15); }
    }
    .floating-back-btn.attention {
      animation: backBtnPulse 900ms ease-in-out 0s 3; /* ~2.7s total */
    }

    @media (prefers-reduced-motion: reduce) {
      .floating-back-btn.attention {
        animation: none;
        outline: 2px solid #a855f7;
        outline-offset: 2px;
      }
    }
  </style>
</head>
<body>
  <!-- Floating Back Button -->
  <button id="floating-back-button" class="floating-back-btn" aria-label="Go back">
    <i class="fas fa-arrow-left"></i>
    Back
  </button>

  <div class="container">
    <h2 id="welcome-leaflet">Welcome Leaflet</h2>
    <p>This is the welcome leaflet participants may come across if they come to our events for the first time. If you went to one but didn‚Äôt come across it, here it is for you. üòä</p>
    <hr>
    <h2 id="dear-curious-souls">Dear Curious Souls</h2>
    <p>üíñ <strong>Welcome to Curious Souls Caf√©</strong>--a fresh concept designed to spark engaging conversations and build a vibrant community. We believe our city thrives on diverse interactions, and we‚Äôre excited to create a space where shared curiosity flourishes.</p>
    <p>In today‚Äôs world, where personalized feeds often isolate us, our events aim to enhance cross-cultural awareness and mutual understanding. We recognize that our increasingly autonomous lifestyles can limit opportunities for meaningful, face-to-face conversations. By coming together, we can break these barriers and forge meaningful connections.</p>
    <hr>
    <h2 id="-what-to-expect">üìÖ What to Expect</h2>
    <ul>
      <li><p><strong>Regular Meetings</strong>:<br>Join us regularly to explore a wide range of topics. Each meeting will be a platform for open dialogue and exploration.</p></li>
      <li><p><strong>Facilitating for All</strong>:<br>Whether you‚Äôre experienced or new, anyone can take the lead, provided that we respect one another. The floor is open for sharing ideas, practicing empathy, and enhancing communication skills.</p></li>
      <li><p><strong>Respectful Dialogue</strong>:<br>Remember, there are no right or wrong answers here. We value respect and understanding in all discussions, encouraging a safe space for everyone‚Äôs thoughts.</p></li>
      <li><p><strong>Peer-Powered Gatherings</strong>:<br>We‚Äôre not affiliated with any organization or restaurant. This is a grassroots effort, a meaningful hangout for everyone.</p></li>
      <li><p><strong>Building Community</strong>:<br>After a couple of meetings, we‚Äôll hope to pass the facilitator‚Äôs torch to someone new, encouraging a cycle of participation.</p></li>
    </ul>
    <hr>
    <h2 id="-inspired-by-global-communities">üåç Inspired by Global Communities</h2>
    <p>We draw inspiration from various global groups that host similar events. These models encourage curiosity and dialogue, and we believe the world needs more of such events.</p>
    <p>We welcome your suggestions and ideas as we grow together. If this initiative inspires you to start your own group, whether similar or different, we consider that the ultimate success.</p>
    <p>Let‚Äôs embark on this journey of knowledge, wisdom, and philosophy--broadly defined--in a supportive environment. Together, we can cultivate a community that thrives on curiosity and connection.</p>
    <p>Looking forward to meeting each of you! üòä</p><br>

    <a href="https://unsplash.com/s/visual/c4c07c2d-d20d-42a3-ba43-e23d6028a471" target="_blank" rel="noopener noreferrer">
      <img src="https://images.unsplash.com/photo-1486122151631-4b5aaa3ac70d?w=800&h=600&fit=crop&q=80" 
       alt="Closeup photo of ceramic coffee mug with brown liquid inside" />
    </a>
    <p>
      (Photo by <a href="https://unsplash.com/@davidoa" target="_blank" rel="noopener noreferrer">David O. Andersen</a> on 
      <a href="https://unsplash.com" target="_blank" rel="noopener noreferrer">Unsplash</a>)
    </p>

    <h2 id="disclaimer">Disclaimer</h2>
    <p>Curious Souls Caf√© fosters open discussions for idea exploration, not professional advice; participants are responsible for their well-being and encouraged to consult qualified professionals when needed.</p>
    <!-- <p>‚¨ÖÔ∏è <a href="https://curioussoulscafe.github.io/curious-souls-cafe/">Leave this page</a> (go to Curious Souls Caf√© web app)</p> -->
    <!-- Link to show QR Code -->
    <a href="#" id="show-qr-code-link" class="qr-code-link">
      <i class="fas fa-qrcode"></i> Show a QR Code/Link for this Page
    </a>
  </div>

  <!-- QR Code Modal -->
  <div id="qr-code-modal" class="modal-overlay" aria-hidden="true" role="dialog" aria-labelledby="qr-modal-title" aria-modal="true">
      <div id="qr-modal-content" class="modal-content">
          <button class="qr-modal-close-button" id="qr-modal-close-button" aria-label="Close">&times;</button>
          <h3 id="qr-modal-title" class="text-lg font-semibold text-gray-800 mb-4">Share this Page</h3>
          <p class="text-gray-600 text-sm mb-4">Scan the QR code below to quickly share or access this page:</p>
          <img id="qr-modal-image" src="images/qr/qr-code-welcome.png" alt="QR Code for this page"
               onerror="this.onerror=null;this.src='https://placehold.co/250x250/E0E0E0/6B46C1?text=QR+Code+Loading';">

          <p class="text-sm text-gray-700 mt-2">
              <i class="fa-solid fa-link mr-1"></i> 
              <a id="page-direct-link" href="https://curioussoulscafe.github.io/curious-souls-cafe/pages/welcome.html" class="text-blue-600 hover:underline break-all">https://curioussoulscafe.github.io/curious-souls-cafe/pages/welcome.html</a>
              <br>
              <button id="copy-link-text-link" class="text-blue-600 text-sm mt-4 hover:underline" type="button"><i class="fas fa-copy"></i>&nbsp;&nbsp;Copy page link</button>
              &nbsp;<span class="text-gray-400 text-sm select-none">|</span>&nbsp;&nbsp;
              <button id="share-link-button" class="text-blue-600 text-sm mt-4 hover:underline" type="button"><i class="fas fa-share-from-square"></i> Share...</button>
          </p>
          <p class="text-gray-500 text-sm mt-4">Let's help fellow curious souls launch this page and start the conversation! üòä</p>
      </div>
  </div>

  <script>
    // Elements
    const showQrCodeLink = document.getElementById('show-qr-code-link');
    const qrCodeModal = document.getElementById('qr-code-modal');
    const qrModalImage = document.getElementById('qr-modal-image');
    const qrModalCloseButton = document.getElementById('qr-modal-close-button');
    const copyLinkTextLink = document.getElementById('copy-link-text-link');
    const shareLinkButton = document.getElementById('share-link-button');
    const pageDirectLink = document.getElementById('page-direct-link');

    // Helper: open/close modal with basic focus management
    function openModal() {
      const pageUrl = window.location.href;
      const qrCodeApiUrl = `https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(pageUrl)}`;
      qrModalImage.src = qrCodeApiUrl;
      qrCodeModal.classList.add('show');
      qrCodeModal.setAttribute('aria-hidden', 'false');
      // Move focus to close button for accessibility
      qrModalCloseButton.focus();
      // Update the direct link to the actual current URL
      pageDirectLink.href = pageUrl;
      pageDirectLink.textContent = pageUrl;
    }
    function closeModal() {
      qrCodeModal.classList.remove('show');
      qrCodeModal.setAttribute('aria-hidden', 'true');
      showQrCodeLink.focus();
    }

    // Show modal
    showQrCodeLink.addEventListener('click', (e) => {
      e.preventDefault();
      openModal();
    });

    // Close modal via button
    qrModalCloseButton.addEventListener('click', closeModal);

    // Close modal by clicking overlay
    qrCodeModal.addEventListener('click', (e) => {
      if (e.target === qrCodeModal) {
        closeModal();
      }
    });

    // Close on Escape
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && qrCodeModal.classList.contains('show')) {
        closeModal();
      }
    });

    // Copy link
    copyLinkTextLink.addEventListener('click', async (e) => {
      e.preventDefault();
      const pageUrl = window.location.href;

      // Try modern clipboard API
      if (navigator.clipboard && window.isSecureContext) {
        try {
          await navigator.clipboard.writeText(pageUrl);
          alert('Link copied to clipboard!');
          return;
        } catch (err) {
          console.warn('navigator.clipboard failed, falling back:', err);
        }
      }

      // Fallback using a temporary textarea
      const tempInput = document.createElement('textarea');
      tempInput.value = pageUrl;
      tempInput.setAttribute('readonly', '');
      tempInput.style.position = 'absolute';
      tempInput.style.left = '-9999px';
      document.body.appendChild(tempInput);
      tempInput.select();
      try {
        document.execCommand('copy');
        alert('Link copied to clipboard!');
      } catch (err) {
        alert('Unable to copy. Please copy the link manually.');
      } finally {
        document.body.removeChild(tempInput);
      }
    });

    // Share link (Web Share API with graceful handling)
    function updateShareButtonAvailability() {
      const supported = !!navigator.share;
      if (!supported) {
        // Visually indicate unavailability but keep visible
        shareLinkButton.classList.add('btn-disabled');
        shareLinkButton.setAttribute('aria-disabled', 'true');
        shareLinkButton.title = 'Sharing not supported by this browser';
      }
    }

    shareLinkButton.addEventListener('click', async (e) => {
      e.preventDefault();
      if (!navigator.share) {
        // Optional: provide a quick fallback to copy the URL
        try {
          if (navigator.clipboard && window.isSecureContext) {
            await navigator.clipboard.writeText(window.location.href);
            alert('Sharing not supported here. Link copied to clipboard instead.');
          } else {
            // fallback to the copy logic
            copyLinkTextLink.click();
          }
        } catch {
          // As a last resort, do nothing silently
        }
        return;
      }

      try {
        await navigator.share({
          title: document.title,
          text: 'Join me at Curious Souls Caf√©!',
          url: window.location.href
        });
      } catch (err) {
        // User canceled or share failed; no noisy error
        console.warn('Share canceled or failed:', err);
      }
    });

    // Initialize UI states
    updateShareButtonAvailability();

    // Floating Back button behavior and attention effect
    function goBackFallback() {
      if (window.history.length > 1) {
        window.history.back();
      } else {
        window.location.href = '../index.html';
      }
    }

    function runBackButtonAttention() {
      const floatingBackButton = document.getElementById('floating-back-button');
      if (!floatingBackButton) return;
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (!prefersReduced) {
        floatingBackButton.classList.add('attention');
        setTimeout(() => {
          floatingBackButton.classList.remove('attention');
        }, 3000);
      } else {
        floatingBackButton.style.outline = '2px solid #a855f7';
        floatingBackButton.style.outlineOffset = '2px';
        setTimeout(() => {
          floatingBackButton.style.outline = '';
          floatingBackButton.style.outlineOffset = '';
        }, 2000);
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const floatingBackButton = document.getElementById('floating-back-button');
      if (floatingBackButton) {
        floatingBackButton.addEventListener('click', goBackFallback);
      }
      runBackButtonAttention();
    });
  </script>
</body>
</html>